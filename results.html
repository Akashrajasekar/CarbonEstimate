
<!DOCTYPE html>
<html>
<head>
    <title>Carbon Emission Calculator</title>
    <style>
    @import url(https://fonts.googleapis.com/css?family=Open+Sans);

    body {
            margin-top: 50px;
            position: relative; /* Make the body a positioning context for absolute elements */
            background: #dbe6dc;
        }

    h1 {
            font-family: 'Open Sans', sans-serif;
            font-size: 40px;
            font-weight: 500;
            line-height: 32px;
            margin: 0 0 72px;
            text-align: center;
            position: absolute; /* Position the h1 element absolutely */
            top: 0; /* Move the h1 element to the top of the body */
            left: 50%; /* Center the h1 element horizontally */
            transform: translateX(-50%); /* Adjust the centering */
            width: 100%; /* Make the h1 element span the full width */
            color: #0d4237;

        }
        .container {
    display: flex;
    flex-direction: column; /* Stack the emission sections vertically */
    align-items: center; /* Center the content horizontally within the container */
    font-family: Roboto, Arial, sans-serif;
    font-size: 15px;
    padding-top: 80px;
    max-width: 600px;
    margin: 0 auto;
    background-color: transparent;
}

        .emission {
            width: 100%;
            padding: 6px;
            font-family: 'Open Sans', sans-serif;
            font-weight: 300;
            border-radius: 4px;
            box-sizing: border-box;
            margin-top: 3px;
            margin-bottom: 8px;
            resize: vertical;
            background-color: rgba(0, 0, 0, 0.5);
            color: #ccc;
        }

        .emission:before {
            background-image: url("https://i.postimg.cc/8CrqQhJL/cool-background.jpg");
            width: 100%;
            height: 100%;
            background-size: cover;
            content: "";
            position: fixed;
            left: 0;
            right: 0;
            top: 0;
            bottom: 0;
            z-index: -1;
            display: block;
            filter: blur(2px);
        }
            button {
            background-color: #8ebf42;
            color: white;
            border: none;
                border-radius: 5px;
                cursor: pointer;
                width: 100%;
                font-size: 18px;
                padding: 10px;
                margin: 20px 0px;
            }
        #total-emission{
        margin-bottom: 10px;
        width: 100%; /* Full width */
        padding: 6px; /* Some padding */
        font-family: 'Open Sans', sans-serif;
        font-weight: 300;
        border-radius: 4px; /* Rounded borders */
        box-sizing: border-box; /* Make sure that padding and width stays in place */
        margin-top: 3px; /* Add a top margin */
        resize: vertical; /* Allow the user to vertically resize the textarea (not horizontally) */
        background-color: rgba(0, 0, 0, 0.5);
        color: #ccc;
        }
        #electricity-emissions{
        margin-bottom: 10px;
        width: 100%; /* Full width */
        padding: 6px; /* Some padding */
        font-family: 'Open Sans', sans-serif;
        font-weight: 300;
        border-radius: 4px; /* Rounded borders */
        box-sizing: border-box; /* Make sure that padding and width stays in place */
        margin-top: 3px; /* Add a top margin */
        resize: vertical; /* Allow the user to vertically resize the textarea (not horizontally) */
        background-color: rgba(0, 0, 0, 0.5);
        color: #ccc;
        }
        #vehicle-emissions{
        margin-bottom: 10px;
        width: 100%; /* Full width */
        padding: 6px; /* Some padding */
        font-family: 'Open Sans', sans-serif;
        font-weight: 300;
        border-radius: 4px; /* Rounded borders */
        box-sizing: border-box; /* Make sure that padding and width stays in place */
        margin-top: 3px; /* Add a top margin */
        resize: vertical; /* Allow the user to vertically resize the textarea (not horizontally) */
        background-color: rgba(0, 0, 0, 0.5);
        color: #ccc;
        }
        #flight-emissions{
        margin-bottom: 10px;
        width: 100%; /* Full width */
        padding: 6px; /* Some padding */
        font-family: 'Open Sans', sans-serif;
        font-weight: 300;
        border-radius: 4px; /* Rounded borders */
        box-sizing: border-box; /* Make sure that padding and width stays in place */
        margin-top: 3px; /* Add a top margin */
        resize: vertical; /* Allow the user to vertically resize the textarea (not horizontally) */
        background-color: rgba(0, 0, 0, 0.5);
        color: #ccc;
        }
        #offset-price{
        margin-bottom: 10px;
        width: 100%; /* Full width */
        padding: 6px; /* Some padding */
        font-family: 'Open Sans', sans-serif;
        font-weight: 300;
        border-radius: 4px; /* Rounded borders */
        box-sizing: border-box; /* Make sure that padding and width stays in place */
        margin-top: 3px; /* Add a top margin */
        resize: vertical; /* Allow the user to vertically resize the textarea (not horizontally) */
        background-color: rgba(0, 0, 0, 0.5);
        color: #ccc;
        }
        #total-emission-container {
            width: 100%;
        }
        #total-emission-container h3 {
    text-align: left; /* Set text alignment for <p> tag inside #total-emission-container */
        font-family: 'Open Sans', sans-serif;
        font-weight: 300;
        color: #ccc;
}
    </style>
</head>
<body>
    <h1 style="text-align:center;">Your Carbon Footprint:</h1>
    <div class="container">
    <div class="emission">
        <div id="electricity-emissions">Electricity:</div>
        <div id="vehicle-emissions">Vehicle:</div>
        <div id="flight-emissions">Flight:</div>
    </div>
    </div>
    <div class="container" id="total-emission-container">
        <div id="total-emission" >Total Carbon Footprint:</div>
        <h3>To offset your carbon footprint, click on the 'Offset Now' button.</h3>
        <button style="text-align:centre;" type="submit" id="offset-now-button">Offset Now</button>
        <h3>To offset your personal carbon footprint you can pay the following amount.</h3>
        <!--<div id="offset-price">Total Pay Amount :</div>-->
        <div id="offset-price">Total Amount to be paid to offset all emissions:</div>
        <h3>To pay the offset price, click on the 'Pay Now' button.</h3>
        <button style="text-align:centre;" >Pay Now</button>
    </div>
    <!--<script>
        function updateTotalEmission(totalEmission) {
        const totalEmissionDiv = document.getElementById("total-emission");
        totalEmissionDiv.textContent = totalEmission;
    }

    // Function to fetch data from the URL parameter and display the results on the page
    function displayResults() {
        const urlParams = new URLSearchParams(window.location.search);
        const totalCarbonEmission = urlParams.get('total_carbon_emission');
        updateTotalEmission(totalCarbonEmission);
    }

    // Call displayResults when the page loads
    document.addEventListener('DOMContentLoaded', displayResults);
    </script>-->
    <!--<script>
        function updateTotalEmission(totalEmission) {
            const totalEmissionDiv = document.getElementById("total-emission");
            totalEmissionDiv.textContent = `Total Carbon Footprint: ${totalEmission}`;
        }

        function displayResults() {
            const urlParams = new URLSearchParams(window.location.search);
            const totalCarbonEmission = urlParams.get('total_carbon_emission');
            if (totalCarbonEmission !== null) {
                updateTotalEmission(totalCarbonEmission);
            } else {
                console.error('Error: Total carbon emission parameter is missing.');
            }
        }

        document.addEventListener('DOMContentLoaded', displayResults);
    </script>-->
    <script>
      function updateTotalEmission(totalEmission,electricityEmission,vehicleEmission,flightEmission) {
        const totalEmissionDiv = document.getElementById("total-emission");
        totalEmissionDiv.textContent = `Total Carbon Emission: ${totalEmission} t CO2e approx.`;
        const electricityEmissionDiv = document.getElementById("electricity-emissions");
        electricityEmissionDiv.textContent = `Electricity: ${electricityEmission} t CO2e approx.`;
        const vehicleEmissionDiv = document.getElementById("vehicle-emissions");
        vehicleEmissionDiv.textContent = `Vehicle: ${vehicleEmission} t CO2e approx.`;
        const flightEmissionDiv = document.getElementById("flight-emissions");
        flightEmissionDiv.textContent = `Flight: ${flightEmission} t CO2e approx.`;

      }
      function calculateOffsetPrice(totalEmission) {
        fetch(`/offset?total_emission=${totalEmission}`)
            .then(response => response.json())
            .then(data => {
                const offsetPriceDiv = document.getElementById("offset-price");
                offsetPriceDiv.textContent = `Total Amount to be paid to offset all emissions: ${data.offset} AED`;
            })
            .catch(error => {
                console.error('Error fetching data:', error);
            });
      }

      // Function to fetch data from the URL parameter and display the results on the page
      function displayResults() {

        const urlParams = new URLSearchParams(window.location.search);
        const electricityEmission = parseFloat(urlParams.get('electricity_emission'));
        const vehicleEmission = parseFloat(urlParams.get('vehicle_emission'));
        const flightEmission = parseFloat(urlParams.get('flight_emission'));
        const totalEmission = parseFloat(urlParams.get('total_emission'));

        updateTotalEmission(totalEmission,electricityEmission,vehicleEmission,flightEmission);

        // Add event listener to the "Offset Now" button
        const offsetNowButton = document.getElementById("offset-now-button");
        offsetNowButton.addEventListener("click", function() {
            calculateOffsetPrice(totalEmission);
        });
      }

      // Call displayResults when the page loads
      document.addEventListener('DOMContentLoaded', displayResults);
    </script>


</body>
</html>
